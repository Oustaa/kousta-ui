"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[584],{3120:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>k,contentTitle:()=>j,default:()=>y,frontMatter:()=>g,metadata:()=>b,toc:()=>f});var i=t(2540),o=t(3023),s=t(7447),r=t(3696),l=t(7819),c=t(5032);const a=()=>(0,i.jsx)(l.tz,{onOpen:()=>{},onClose:()=>{},options:[{optionType:"Group",groupTitle:"File"},{title:"New folder",icon:(0,i.jsx)(c.efR,{}),onClick:()=>{}},{optionType:"Separator"},{title:"Copy",icon:(0,i.jsx)(c.$G0,{}),onClick:()=>{}},{title:"Delete",icon:(0,i.jsx)(c.Mst,{}),active:!0,onClick:()=>{}}],children:(0,i.jsx)("div",{style:{padding:16,border:"1px dashed var(--kui-neutral-400)",borderRadius:8},children:"Right\u2011click anywhere in this box"})}),d=()=>(0,i.jsx)(l.tz,{options:[{title:"Rename",onClick(){}}],children:(0,i.jsx)("div",{style:{padding:16,border:"1px dashed var(--kui-neutral-400)",borderRadius:8},children:"Right\u2011click me"})}),u=()=>{const e=[{title:"Share",icon:(0,i.jsx)(c.f5q,{}),subOptions:[{title:"Copy link",onClick(){}},{title:"Invite people\u2026",onClick(){}}]},{optionType:"Separator"},{title:"Move to",subOptions:[{title:"Project A",onClick(){}},{title:"Project B",onClick(){}}]}];return(0,i.jsx)(l.tz,{options:e,children:(0,i.jsx)("div",{style:{height:120,display:"grid",placeItems:"center",border:"1px dashed var(--kui-neutral-400)",borderRadius:8},children:"Right\u2011click"})})},p=()=>{const e=[{optionType:"Group",groupTitle:"Members"},{title:"Invite",icon:(0,i.jsx)(c.Dx4,{}),onClick(){}},{optionType:"Separator"},{optionType:"Group",groupTitle:"File"},{title:"Download",icon:(0,i.jsx)(c.Oz0,{}),onClick(){}},{title:"Archive",icon:(0,i.jsx)(c.cf8,{}),active:!1,onClick(){}}];return(0,i.jsx)(l.tz,{options:e,children:(0,i.jsx)("div",{style:{padding:16,border:"1px dashed var(--kui-neutral-400)",borderRadius:8},children:"Right\u2011click here"})})},h=()=>{const e=[{title:"Select",onClick(){},closeOnClick:!1},{title:"Apply",onClick(){},closeOnClick:!0}];return(0,i.jsx)(l.tz,{itemCloseOnClick:!1,options:e,children:(0,i.jsx)("div",{style:{padding:16,border:"1px dashed var(--kui-neutral-400)",borderRadius:8},children:"Right\u2011click (menu stays open unless item overrides)"})})},x=()=>{const e=(0,r.useRef)(null),n=(n,t)=>{const i=e.current;if(!i)return;const o=i.getBoundingClientRect(),s=o.left+o.width*n,r=o.top+o.height*t,l=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:s,clientY:r});i.dispatchEvent(l)};return(0,i.jsx)(l.tz,{options:[{title:"Item 1",onClick(){}},{title:"Item 2",onClick(){}},{title:"Item 3",onClick(){}}],children:(0,i.jsxs)("div",{ref:e,style:{position:"relative",border:"1px dashed var(--kui-neutral-400)",borderRadius:8,padding:24,minHeight:180},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:12},children:[(0,i.jsx)("button",{type:"button",onClick:()=>n(.05,.1),children:"Open at Top\u2011Left"}),(0,i.jsx)("button",{type:"button",onClick:()=>n(.95,.1),children:"Open at Top\u2011Right"}),(0,i.jsx)("button",{type:"button",onClick:()=>n(.05,.9),children:"Open at Bottom\u2011Left"}),(0,i.jsx)("button",{type:"button",onClick:()=>n(.95,.9),children:"Open at Bottom\u2011Right"}),(0,i.jsx)("button",{type:"button",onClick:()=>n(.5,.5),children:"Open at Center"})]}),"Right\u2011click anywhere in this box, or use the buttons above to simulate at edges/corners."]})})},m=()=>{const e=[{title:"Open",onClick(){}}];return(0,i.jsx)(l.tz,{As:"section",className:"file-tile",options:e,children:(0,i.jsxs)("section",{style:{padding:16,border:"1px dashed var(--kui-neutral-400)",borderRadius:8},children:[(0,i.jsx)("img",{alt:"Thumbnail",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBA==",style:{width:48,height:48,borderRadius:6}}),(0,i.jsx)("div",{style:{fontSize:12,opacity:.8},children:"Right\u2011click the tile (section)"})]})})},v=()=>(0,i.jsx)(l.tz,{options:[{title:"Alpha",onClick(){}},{title:"Beta",onClick(){}}],children:(0,i.jsx)("div",{style:{padding:16,border:"1px dashed var(--kui-neutral-400)",borderRadius:8},children:"Right\u2011click; disabled items render as disabled buttons (via active:false)"})}),g={sidebar_position:3},j="Context Menu",b={id:"Components/ContextMenu",title:"Context Menu",description:"The ContextMenu provides a customizable, nested right\u2011click menu. It supports options, groups, separators, sub\u2011menus, per\u2011item enable/disable, and automatic viewport\u2011aware placement.",source:"@site/docs/Components/ContextMenu.md",sourceDirName:"Components",slug:"/Components/ContextMenu",permalink:"/docs/Components/ContextMenu",draft:!1,unlisted:!1,editUrl:"https://github.com/Oustaa/kousta-ui/blob/main/docs/docs/Components/ContextMenu.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Menu",permalink:"/docs/Components/Menu"},next:{title:"Modal",permalink:"/docs/Components/Modal"}},k={},f=[{value:"Quick start",id:"quick-start",level:2},{value:"Preview",id:"preview",level:3},{value:"Anatomy",id:"anatomy",level:2},{value:"Preview",id:"preview-1",level:3},{value:"Provider props",id:"provider-props",level:2},{value:"Options model",id:"options-model",level:3},{value:"Usage patterns",id:"usage-patterns",level:2},{value:"Basic right\u2011click menu",id:"basic-rightclick-menu",level:3},{value:"Preview",id:"preview-2",level:3},{value:"Sub\u2011menus",id:"submenus",level:3},{value:"Preview",id:"preview-3",level:3},{value:"Groups, separators, and icons",id:"groups-separators-and-icons",level:3},{value:"Preview",id:"preview-4",level:3},{value:"Close behavior",id:"close-behavior",level:3},{value:"Preview",id:"preview-5",level:3},{value:"Positioning &amp; viewport awareness",id:"positioning--viewport-awareness",level:2},{value:"Preview (interactive)",id:"preview-interactive",level:3},{value:"Custom wrapper element",id:"custom-wrapper-element",level:2},{value:"Preview",id:"preview-6",level:3},{value:"Accessibility",id:"accessibility",level:2},{value:"Preview",id:"preview-7",level:3},{value:"Styling hooks",id:"styling-hooks",level:2},{value:"Testing recipes",id:"testing-recipes",level:2},{value:"Tips &amp; gotchas",id:"tips--gotchas",level:2},{value:"Types (reference)",id:"types-reference",level:2}];function C(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"context-menu",children:"Context Menu"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"ContextMenu"})," provides a customizable, nested right\u2011click menu. It supports options, groups, separators, sub\u2011menus, per\u2011item enable/disable, and automatic viewport\u2011aware placement."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick start"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import ContextMenu from "@kousta-ui/components/ContextMenu";\nimport { LuCopy, LuTrash2, LuFolderPlus } from "react-icons/lu";\n\nexport default function Example() {\n  return (\n    <ContextMenu\n      onOpen={() => console.log("opened")}\n      onClose={() => console.log("closed")}\n      options={[\n        { optionType: "Group", groupTitle: "File" },\n        {\n          title: "New folder",\n          icon: <LuFolderPlus />,\n          onClick: () => console.log("new folder"),\n        },\n        { optionType: "Separator" },\n        {\n          title: "Copy",\n          icon: <LuCopy />,\n          onClick: () => console.log("copy"),\n        },\n        {\n          title: "Delete",\n          icon: <LuTrash2 />,\n          active: true, // disable with active: false\n          onClick: () => console.log("delete"),\n        },\n      ]}\n    >\n      <div style={{ padding: 24, border: "1px dashed var(--kui-neutral-400)" }}>\n        Right\u2011click anywhere in this box\n      </div>\n    </ContextMenu>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"preview",children:"Preview"}),"\n",(0,i.jsx)(a,{}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"anatomy",children:"Anatomy"}),"\n",(0,i.jsx)(n.p,{children:"The Context Menu is built from these pieces:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"<ContextMenu \u2026>"})," (Provider)"]})," \u2013 wraps the target area and holds state/positioning"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ContextMenuMenu"})})," \u2013 internal popover that renders the menu list"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ContextMenuItem"})})," \u2013 a single actionable option"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ContextMenuItemWithSubs"})})," \u2013 an option revealing a nested submenu on click"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ContextMenuSeparator"})})," \u2013 horizontal separator line"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"ContextmenuGroup"})})," \u2013 visual group header"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["You typically only import and use the ",(0,i.jsx)(n.strong,{children:"Provider"}),"; the other parts are wired internally."]}),"\n",(0,i.jsx)(n.h3,{id:"preview-1",children:"Preview"}),"\n",(0,i.jsx)(p,{}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"provider-props",children:"Provider props"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'type ContextmenuProviderProps = {\n  /** Menu options (items, groups, separators, and sub\u2011menus) */\n  options: ContextMenuOption[];\n  /** Wrapper element/tag for the target area; defaults to "div" */\n  As?: string;\n  /** Called when the menu opens */\n  onOpen?: () => void;\n  /** Called when the menu closes (outside click, etc.) */\n  onClose?: () => void;\n  /** Global default: whether clicking an item closes the menu */\n  itemCloseOnClick?: boolean; // default: true\n} & React.PropsWithChildren;\n'})}),"\n",(0,i.jsx)(n.h3,{id:"options-model",children:"Options model"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'export type ContextMenuTypeOption = {\n  optionType?: "option";\n  icon?: ReactNode;\n  title?: string | ReactNode;\n  active?: boolean;        // default: true\n  hidden?: boolean;        // if true, item is not rendered\n  deactiveMessage?: string;\n  closeOnClick?: boolean;  // per-item override\n} & (\n  | { onClick: () => void; subOptions?: never } // leaf action\n  | {\n      subOptions: (ContextMenuOption & { type?: "click" | "hover" })[]; // submenu\n      onClick?: never;\n    }\n);\n\nexport type ContextMenuTypeSeparato = { optionType: "Separator" };\nexport type ContextMenuTypeGroup = { optionType: "Group"; groupTitle: string };\n\nexport type ContextMenuOption =\n  | ContextMenuTypeSeparato\n  | ContextMenuTypeGroup\n  | ContextMenuTypeOption;\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Tip:"})," Use ",(0,i.jsx)(n.code,{children:"active: false"})," to disable an option, and ",(0,i.jsx)(n.code,{children:"hidden: true"})," to conditionally hide it."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"usage-patterns",children:"Usage patterns"}),"\n",(0,i.jsx)(n.h3,{id:"basic-rightclick-menu",children:"Basic right\u2011click menu"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'<ContextMenu options={[{ title: "Rename", onClick() {} }]}>\n  <div>Right\u2011click me</div>\n</ContextMenu>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"preview-2",children:"Preview"}),"\n",(0,i.jsx)(d,{}),"\n",(0,i.jsx)(n.h3,{id:"submenus",children:"Sub\u2011menus"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'const options = [\n  {\n    title: "Share",\n    subOptions: [\n      { title: "Copy link", onClick() {} },\n      { title: "Invite people\u2026", onClick() {} },\n    ],\n  },\n  { optionType: "Separator" },\n  {\n    title: "Move to",\n    subOptions: [\n      { title: "Project A", onClick() {} },\n      { title: "Project B", onClick() {} },\n    ],\n  },\n];\n\n<ContextMenu options={options}>\n  <div style={{ height: 120 }}>Right\u2011click</div>\n</ContextMenu>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"preview-3",children:"Preview"}),"\n",(0,i.jsx)(u,{}),"\n",(0,i.jsx)(n.h3,{id:"groups-separators-and-icons",children:"Groups, separators, and icons"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { LuUserPlus, LuDownload, LuArchive } from "react-icons/lu";\n\nconst options = [\n  { optionType: "Group", groupTitle: "Members" },\n  { title: "Invite", icon: <LuUserPlus />, onClick() {} },\n  { optionType: "Separator" },\n  { optionType: "Group", groupTitle: "File" },\n  { title: "Download", icon: <LuDownload />, onClick() {} },\n  { title: "Archive", icon: <LuArchive />, active: false, onClick() {} },\n];\n'})}),"\n",(0,i.jsx)(n.h3,{id:"preview-4",children:"Preview"}),"\n",(0,i.jsx)(p,{}),"\n",(0,i.jsx)(n.h3,{id:"close-behavior",children:"Close behavior"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Global default is controlled by ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"itemCloseOnClick"})})," on the provider (default ",(0,i.jsx)(n.code,{children:"true"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Per-item override with ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"closeOnClick"})}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'<ContextMenu\n  itemCloseOnClick={false}\n  options={[\n    { title: "Select", onClick() {}, closeOnClick: false }, // stays open\n    { title: "Apply", onClick() {}, closeOnClick: true },   // closes\n  ]}\n>\n  <div>Right\u2011click</div>\n</ContextMenu>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"preview-5",children:"Preview"}),"\n",(0,i.jsx)(h,{}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"positioning--viewport-awareness",children:"Positioning & viewport awareness"}),"\n",(0,i.jsxs)(n.p,{children:["The menu opens at pointer coordinates (",(0,i.jsx)(n.code,{children:"pageX"}),", ",(0,i.jsx)(n.code,{children:"pageY"}),") and ",(0,i.jsx)(n.strong,{children:"auto\u2011adjusts"})," if it would overflow the viewport. Internally:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The provider measures the rendered menu via a ",(0,i.jsx)(n.code,{children:"ref"})]}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"(menuHeight + y) > pageHeight"}),", it flips vertically (sets an ",(0,i.jsx)(n.code,{children:"offsetY"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:["If ",(0,i.jsx)(n.code,{children:"(menuWidth + x) > pageWidth"}),", it flips horizontally (sets an ",(0,i.jsx)(n.code,{children:"offsetX"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Sub\u2011menus inherit these offsets to render inward (left/up) when needed"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You do not need to pass anything to enable this; it's handled automatically."}),"\n",(0,i.jsx)(n.h3,{id:"preview-interactive",children:"Preview (interactive)"}),"\n",(0,i.jsx)(n.p,{children:"Use the controls to simulate a right\u2011click at different corners/edges and see how the menu flips to stay within the viewport."}),"\n",(0,i.jsx)(x,{}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"custom-wrapper-element",children:"Custom wrapper element"}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"As"})," to change the HTML tag of the right\u2011click area and pass extra props."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'<ContextMenu As="section" className="file-tile" options={[{ title: "Open", onClick() {} }]}>\n  <img src="/thumb.png" alt="Thumbnail" />\n</ContextMenu>\n'})}),"\n",(0,i.jsx)(n.h3,{id:"preview-6",children:"Preview"}),"\n",(0,i.jsx)(m,{}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"accessibility",children:"Accessibility"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Opens on ",(0,i.jsx)(n.strong,{children:"contextmenu"})," (right\u2011click) and closes on outside click."]}),"\n",(0,i.jsxs)(n.li,{children:["Items render as ",(0,i.jsx)(n.code,{children:"<button>"})," with proper disabled states via ",(0,i.jsx)(n.code,{children:"active: false"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Add visible focus styles in your CSS for keyboard users if you add keyboard support."}),"\n",(0,i.jsx)(n.li,{children:"Provide text labels for icon\u2011only items."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(s.A,{color:"green",children:"Note"})," Keyboard navigation is not implemented by default. If you need it, wrap/extend the components to manage focus, arrow\u2011key navigation, and ARIA roles like ",(0,i.jsx)(n.code,{children:"menu"}),"/",(0,i.jsx)(n.code,{children:"menuitem"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"preview-7",children:"Preview"}),"\n",(0,i.jsx)(v,{}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"styling-hooks",children:"Styling hooks"}),"\n",(0,i.jsxs)(n.p,{children:["Default class names from ",(0,i.jsx)(n.code,{children:"ContextMenu.module.css"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu-Container"})," \u2013 absolute stacking context (portal\u2011like container)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu"})," \u2013 the floating menu panel"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu-Item"})," \u2013 clickable row"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu-ItemIcon"})," \u2013 leading icon cell"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu_separator_container"})," \u2013 wrapper for separator line"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu_separator"})," \u2013 separator line"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu_separator_icon"})," \u2013 spacer cell aligned with icons"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu_group_title"})," \u2013 group header text"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-contextMenu-Item_WithSubs"})," \u2013 submenu panel modifier"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".kui-iconsContainer"})," \u2013 (internal) reserved icon gutter"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Override any of these to fit your design system."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"testing-recipes",children:"Testing recipes"}),"\n",(0,i.jsx)(n.p,{children:"The test suite can follow these patterns:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { render, screen, fireEvent } from "@testing-library/react";\nimport ContextMenu from "@kousta-ui/components/ContextMenu";\n\nconst onLeaf = jest.fn();\nconst onSub = jest.fn();\n\nconst options = [\n  { title: "Leaf", onClick: onLeaf, closeOnClick: false },\n  { title: "Has sub", subOptions: [{ title: "Sub leaf", onClick: onSub }] },\n];\n\ntest("opens on right-click and executes leaf click", () => {\n  render(<ContextMenu options={options}>Area</ContextMenu>);\n  fireEvent.contextMenu(screen.getByText(/area/i)); // open\n  fireEvent.click(screen.getByText(/leaf/i));       // click\n  expect(onLeaf).toHaveBeenCalled();\n});\n\ntest("opens submenu and executes sub click", () => {\n  render(<ContextMenu options={options}>Area</ContextMenu>);\n  fireEvent.contextMenu(screen.getByText(/area/i));\n  fireEvent.click(screen.getByText(/has sub/i)); // reveal submenu\n  fireEvent.click(screen.getByText(/sub leaf/i));\n  expect(onSub).toHaveBeenCalled();\n});\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"tips--gotchas",children:"Tips & gotchas"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Don\u2019t render hidden items"}),": use ",(0,i.jsx)(n.code,{children:"hidden: true"})," to skip an item conditionally."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Disable instead of removing"})," when preserving layout: ",(0,i.jsx)(n.code,{children:"active: false"})," gives a consistent visual state without interaction."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Per\u2011item close behavior"}),": ",(0,i.jsx)(n.code,{children:"closeOnClick"})," overrides the provider\u2019s ",(0,i.jsx)(n.code,{children:"itemCloseOnClick"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nested sub\u2011menus"})," are supported recursively\u2014each submenu honors auto\u2011flip logic using ",(0,i.jsx)(n.code,{children:"offsetX/offsetY"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["The target area uses ",(0,i.jsx)(n.code,{children:"onContextMenu"})," to intercept the native menu; call ",(0,i.jsx)(n.code,{children:"preventDefault()"})," yourself if you extend behavior."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"types-reference",children:"Types (reference)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'export type ContextMenuTypeOption = {\n  optionType?: "option";\n  icon?: ReactNode;\n  title?: string | ReactNode;\n  active?: boolean;\n  hidden?: boolean;\n  deactiveMessage?: string;\n  closeOnClick?: boolean;\n} & (\n  | { onClick: () => void; subOptions?: never }\n  | { subOptions: (ContextMenuOption & { type?: "click" | "hover" })[]; onClick?: never }\n);\n\nexport type ContextMenuTypeSeparato = {\n  optionType: "Separator";\n};\n\nexport type ContextMenuTypeGroup = {\n  optionType: "Group";\n  groupTitle: string;\n};\n\nexport type ContextMenuOption =\n  | ContextMenuTypeSeparato\n  | ContextMenuTypeGroup\n  | ContextMenuTypeOption;\n\nexport type ContextmenuProviderProps = {\n  options: ContextMenuOption[];\n  As?: string;\n  onOpen?: () => void;\n  onClose?: () => void;\n  itemCloseOnClick?: boolean;\n} & React.PropsWithChildren;\n'})})]})}function y(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(C,{...e})}):C(e)}},7447:(e,n,t)=>{t.d(n,{A:()=>o});t(3696);var i=t(2540);function o({children:e,color:n="warning"}){return(0,i.jsx)("span",{className:`badge badge-${n}`,children:e})}},7819:(e,n,t)=>{t.d(n,{$n:()=>k,W1:()=>E,aF:()=>F,tz:()=>p});var i=t(2540),o=t(3696);function s(e,n="18px"){return e&&"string"!=typeof e&&"number"!=typeof e&&!0!==e&&(0,o.cloneElement)(e,{style:{fontSize:n}})}var r={"kui-contextMenu":"kui-contextMenu_BrRba","kui-contextMenu-Item":"kui-contextMenu-Item_evNeA","kui-contextMenu-ItemIcon":"kui-contextMenu-ItemIcon_-HLda","kui-contextMenu_separator_container":"kui-contextMenu_separator_container_w9GaJ","kui-contextMenu_separator":"kui-contextMenu_separator_u7zFD","kui-contextMenu_separator_icon":"kui-contextMenu_separator_icon_-mbqe","kui-contextMenu_group_title":"kui-contextMenu_group_title_I-K-B"};const l=()=>(0,i.jsxs)("div",{className:r["kui-contextMenu_separator_container"],children:[(0,i.jsx)("div",{className:r["kui-contextMenu_separator_icon"]}),(0,i.jsx)("div",{className:r["kui-contextMenu_separator"]})]}),c=({title:e})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l,{}),(0,i.jsxs)("div",{className:r["kui-contextMenu_separator_container"],children:[(0,i.jsx)("div",{className:r["kui-contextMenu_separator_icon"]}),(0,i.jsx)("span",{className:r["kui-contextMenu_group_title"],children:e})]})]}),a=e=>{const{icon:n,onClick:t,title:o,setMenuVisible:a,active:d=!0,hidden:u,closeOnClick:p=!0,itemCloseOnClick:h=!0,onClose:x}=e;if(!u)return e.optionType&&"Separator"===e.optionType?(0,i.jsx)(l,{}):e.optionType&&"Group"===e.optionType?(0,i.jsx)(c,{title:e.groupTitle}):(0,i.jsxs)("button",{onClick:e=>{e.stopPropagation(),t?.(),(!1!==h&&!0===p||!0===p)&&(a(!1),x?.())},className:r["kui-contextMenu-Item"],disabled:!d,children:[(0,i.jsx)("div",{className:r["kui-contextMenu-ItemIcon"],children:s(n)}),o]})},d=({icon:e,title:n,setMenuVisible:t,active:c=!0,subOptions:u,offsetX:p,offsetY:h,itemCloseOnClick:x})=>{const m=(0,o.useRef)(null),[v,g]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&g(!1)};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[]),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:r["kui-iconsContainer"]}),(0,i.jsxs)("button",{ref:m,onClick:e=>{e.stopPropagation(),c&&g(!0)},className:r["kui-contextMenu-Item"],disabled:!c,children:[(0,i.jsx)("div",{className:r["kui-contextMenu-ItemIcon"],children:s(e)}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"10px",width:"100%"},children:[n,(0,i.jsx)("span",{children:">"})]}),v&&(0,i.jsx)("div",{className:`${r["kui-contextMenu"]} ${r["kui-contextMenu-Item_WithSubs"]}`,style:{left:p?"unset":"100%",right:p?"100%":"unset",top:h?"unset":0,bottom:h?0:"unset",transform:`translateX(${4*(p?-1:1)}px)`},children:u?.map((e,n)=>"Separator"===e.optionType?(0,i.jsx)(l,{}):"Group"===e.optionType?"Group":"option"===e.optionType||void 0===e.optionType&&e.subOptions?(0,i.jsx)(d,{...e,setMenuVisible:t,offsetX:p,offsetY:h,itemCloseOnClick:x},n):(0,i.jsx)(a,{...e,setMenuVisible:t,offsetX:p,offsetY:h,itemCloseOnClick:x},n))})]})]})},u=(0,o.forwardRef)(({x:e,y:n,options:t,setMenuVisible:s,offsetX:l,offsetY:c,itemCloseOnClick:u,onClose:p},h)=>(0,i.jsxs)("div",{style:{top:n-c+"px",left:e-l+"px"},className:r["kui-contextMenu"],ref:h,children:[(0,i.jsx)("div",{className:r["kui-iconsContainer"]}),t.map((e,n)=>"option"!==e.optionType&&void 0!==e.optionType||!e.subOptions?(0,o.createElement)(a,{...e,key:n,setMenuVisible:s,offsetX:l,offsetY:c,itemCloseOnClick:u,onClose:p}):(0,o.createElement)(d,{...e,key:n,offsetX:l,offsetY:c,setMenuVisible:s,itemCloseOnClick:u}))]})),p=({children:e,onClose:n,onOpen:t,options:s,disabled:r=!1,As:l="div",itemCloseOnClick:c=!0,...a})=>{const[d,p]=(0,o.useState)(!1),[h,x]=(0,o.useState)({x:0,y:0}),[m,v]=(0,o.useState)(0),[g,j]=(0,o.useState)(0),b=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&(n?.(),p(!1))},[t,i,o,s]=[b.current?.clientHeight,b.current?.clientWidth,Math.max(document.body.clientHeight,screen.availHeight),document.body.clientWidth];return(t||0)+h.y>o?(x(e=>({...e,y:e.y})),j(t)):j(0),(i||0)+h.x>s?(x(e=>({...e,x:e.x})),v(i)):v(0),document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d,n,h.y,h.x]);return(0,i.jsxs)(l,{...a,onContextMenu:e=>{r||(e.preventDefault(),x({x:e.pageX,y:e.pageY}),p(!0),t?.())},children:[e,(0,i.jsx)("div",{className:"kui-contextMenu-Container",children:d&&s.length>0&&(0,i.jsx)(u,{ref:b,x:h.x,y:h.y,offsetY:g,offsetX:m,options:s,setMenuVisible:p,itemCloseOnClick:c,onClose:n})})]})};var h={btn:"btn_ZW5Ev","btn-sm":"btn-sm_5aNK6 btn_ZW5Ev","btn-md":"btn-md_QYFgg btn_ZW5Ev","btn-lg":"btn-lg_wGoCj btn_ZW5Ev","btn-primary":"btn-primary_nj2mO","btn-primary-outline":"btn-primary-outline_CwoxP","btn-primary-light":"btn-primary-light_c5-oQ","btn-primary-link":"btn-primary-link_q3lUV","btn-success":"btn-success_gVtb9","btn-success-outline":"btn-success-outline_JU2tm","btn-success-light":"btn-success-light_gvC01","btn-success-link":"btn-success-link_q1Q2T","btn-danger":"btn-danger_RcY68","btn-danger-outline":"btn-danger-outline_FS3R0","btn-danger-light":"btn-danger-light_1c0JI","btn-danger-link":"btn-danger-link_mzjxL","btn-neutral":"btn-neutral_XGnnH","btn-neutral-outline":"btn-neutral-outline_TqUoc","btn-neutral-light":"btn-neutral-light_qGfsp","btn-neutral-link":"btn-neutral-link_OgQ1j","btn-warning":"btn-warning_Yfoxn","btn-warning-outline":"btn-warning-outline_p5Amw","btn-warning-light":"btn-warning-light_IQXjt","btn-warning-link":"btn-warning-link_iyd6o"};const x=(0,o.createContext)({});function m(e){const n=(0,o.useContext)(x);if(n)return e?n[e]:n}const v="md",g="primary",j="button",b="Loading...",k=({children:e,disabled:n,loading:t,onClick:o,className:s,type:r,size:l,variant:c,...a})=>{const d=m("button");let u="";return d&&(d.size&&!l&&(l=d.size),d.type&&!r&&(r=d.type),d.variant&&!c&&(c=d.variant),d.style&&(a.style={...d.style,...a.style}),d.loadingIndicator&&!a.loadingIndicator&&(a.loadingIndicator=d.loadingIndicator),u=`${d.className||""}`,d.variants&&c&&d.variants[c]&&(a={...d.variants[c],...a,style:{...d.variants[c].style,...a.style}})),u=u+` ${h[`btn-${c||g}`]} ${h[`btn-${l||v}`]} `+s,(0,i.jsx)("button",{...a,role:"button",className:u,"data-loading":t,disabled:n||t,onClick:e=>o?.(e),type:r||j,children:t?(0,i.jsx)("div",{className:"",children:a.loadingIndicator||b}):e})},f=(0,o.createContext)(null),C=()=>(0,o.useContext)(f),y=({children:e,...n})=>(0,i.jsx)(f.Provider,{value:n,children:e});var w="kui-menu_sOLbk",M="kui-menu_target_zWk07",O="kui-menu_dropdown_-iT-W",T="kui-menu_item_Xss2M",_="kui-menu_label_JIaGQ",S="kui-menu_divider_u8VWW";const I="click",N=!0,R="Bottom-Start",P=4;var E={Menu:({children:e,type:n,closeOnClick:t,position:s,offset:r,...l})=>{const c=m("menu");if(c&&c.menu){const{menu:e}=c;e.type&&!n&&(n=e.type),e.offset&&!r&&(r=e.offset),e.position&&!s&&(s=e.position),e.closeOnClick&&void 0===t&&(t=e.closeOnClick)}n||(n=I),s||(s=R),r||(r=P),void 0===t&&(t=N);const a=(0,o.useRef)(null),[d,u]=(0,o.useState)(!1);return(0,o.useLayoutEffect)(()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,i.jsx)(y,{...l,opened:d,open:()=>u(!0),close:()=>u(!1),toggle:()=>u(e=>!e),type:n,closeOnClick:t,position:s,offset:r,children:(0,i.jsx)("div",{ref:a,onMouseEnter:()=>{"click"!==n&&u(!0)},onMouseLeave:()=>{"click"!==n&&u(!1)},className:w,children:e})})},Target:({children:e})=>{const{toggle:n,type:t}=C();return(0,i.jsx)("button",{onClick:()=>{"hover"!==t&&n()},className:M,children:e})},DropDown:({children:e})=>{const{opened:n,position:t,offset:o}=C();return n?(0,i.jsx)("div",{role:"menu",style:(s=o,{"Bottom-Center":{top:`calc(100% + ${s}px)`,left:"50%",transform:"translateX(-50%)"},"Bottom-Start":{top:`calc(100% + ${s}px)`,left:"0"},"Bottom-End":{top:`calc(100% + ${s}px)`,right:"0"},"Left-Center":{right:`calc(100% + ${s}px)`,top:"50%",transform:"translateY(-50%)"},"Left-Start":{right:`calc(100% + ${s}px)`,top:"0"},"Left-End":{right:`calc(100% + ${s}px)`,bottom:"0"},"Right-Center":{top:"50%",left:`calc(100% + ${s}px)`,transform:"translateY(-50%)"},"Right-Start":{top:"0",left:`calc(100% + ${s}px)`},"Right-End":{left:`calc(100% + ${s}px)`,bottom:"0"},"Top-Center":{bottom:`calc(100% + ${s}px)`,left:"50%",transform:"translateX(-50%)"},"Top-Start":{bottom:`calc(100% + ${s}px)`,left:"0"},"Top-End":{bottom:`calc(100% + ${s}px)`,right:"0"}})[t],className:O,children:e}):null;var s},Item:({children:e,closeMenuOnClick:n,leftSection:t,rightSection:o,disabled:s})=>{const r=m("menu");if(r&&r.menuItem){const{menuItem:e}=r;e.closeMenuOnClick&&void 0===n&&(n=e.closeMenuOnClick)}const{close:l,closeOnClick:c}=C(),a=!0===(n??c);return(0,i.jsxs)("button",{disabled:s,role:"menuitem",onClick:()=>{a&&l()},className:T,children:[t&&t,e,o&&o]})},Label:({children:e,leftSection:n,rightSection:t})=>(0,i.jsxs)("span",{className:_,children:[n&&n,e,t&&t]}),Divider:()=>(0,i.jsx)("hr",{className:S})};var L={"modal-container":"modal-container_a9s1p","menu-header":"menu-header_3pzba","menu-body":"menu-body_8-xuO",backdrop:"backdrop_79rcb"};const $=e=>({center:{marginInline:"auto",top:"50%",transform:"translateY(-50%)"},bottom:{bottom:`${e}px`,top:"unset"},top:{bottom:"unset",top:`${e}px`},right:{marginInline:"unset",marginInlineStart:"auto",top:"50%",transform:"translateY(-50%)",left:"unset"},"right-top":{marginInlineStart:"auto",top:`${e}px`,left:"unset"},"right-bottom":{marginInlineStart:"auto",bottom:`${e}px`,top:"unset",left:"unset"},left:{marginInline:"unset",top:"50%",transform:"translateY(-50%)",right:"unset",left:`${e}px`},"left-bottom":{marginInline:"unset",bottom:`${e}px`,top:"unset",right:"unset",left:`${e}px`},"left-top":{marginInline:"unset",top:`${e}px`,right:"unset",left:`${e}px`}}),A={xs:"600px",sm:"850px",md:"1250px",lg:"1440px",xl:"1800px"},B="md",G=!0,z=!0,W="center",Y=0,X=!0,D=!0,F=({children:e,title:n,opened:t,onClose:s,size:r,withCloseBtn:l,withBackdrop:c,modalTrigger:a,afterClose:d,beforeClose:u,afterOpen:p,beforeOpen:h,position:x,offset:v,fullHeight:g,fullWidth:j,closeOnClickEsc:b,closeOnClickOutside:f,modalTriggerBtnVariant:C})=>{const y=m("modal");y&&(y.position&&!x&&(x=y.position),y.size&&!r&&(r=y.size),y.offset&&void 0===v&&(v=y.offset),void 0!==y.closeOnClickEsc&&void 0===b&&(b=y.closeOnClickEsc),void 0!==y.closeOnClickOutside&&void 0===f&&(f=y.closeOnClickOutside),void 0!==y.withCloseBtn&&void 0===l&&(l=y.withCloseBtn),void 0!==y.withBackdrop&&void 0===c&&(c=y.withBackdrop)),r||(r=B),void 0===l&&(l=G),void 0===c&&(c=z),x||(x=W),v||(v=Y),void 0===b&&(b=X),void 0===f&&(f=D);const{lockScroll:w,unlockScroll:M}={lockScroll:(0,o.useCallback)(()=>{const e=window.innerWidth-document.body.offsetWidth;document.body.style.overflow="hidden",document.body.style.paddingRight=`${e}px`},[]),unlockScroll:(0,o.useCallback)(()=>{document.body.style.overflow=""},[])},O=(0,o.useRef)(null),T="boolean"==typeof t,[_,S]=(0,o.useState)(!!t),I=T&&t||_,N=r&&r in A?A[r]:`${r}px`,R=(0,o.useCallback)(()=>{h&&!1===h()||(T||(S(!0),p?.()),w())},[h,p,T]),P=(0,o.useCallback)(()=>{u&&!1===u()||(T?(s?.(),S(!1)):O.current&&(S(!1),d?.()),M())},[u,t,d,T,s]);return(0,o.useEffect)(()=>(T&&t&&w(),()=>M()),[t]),(0,o.useEffect)(()=>{O.current&&(I?(S(!0),w(),p?.()):(S(!1),M(),d?.()))},[p,d]),(0,o.useEffect)(()=>{const e=e=>{if(!1===f)return;const n=O.current;if(!n)return;const t=e.target;if(t&&n.contains(t))return;const i=e.composedPath?.();i&&i.some(e=>e instanceof Node&&n.contains(e))||P()};document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0);const n=e=>{!1!==b&&"Escape"===e.key&&P()};return document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0),document.removeEventListener("keydown",n)}},[_,t,P]),(0,i.jsxs)(i.Fragment,{children:[!T&&a&&(0,i.jsx)(k,{variant:C,onClick:R,children:a}),c&&(T&&t||_)&&(0,i.jsx)("div",{className:L.backdrop}),(T&&t||_)&&(0,i.jsxs)("div",{"data-testid":"dialog-menu",role:"modal",ref:O,style:{animation:"toLeft 5s toLeft",width:j?`calc(100vw - ${v||0}px)`:`clamp(200px, ${N}, 100%)`,height:g?`calc(100vh - ${v||0}px)`:"max-content",...$(v)[x]},className:L["modal-container"],children:[(n||l)&&(0,i.jsxs)("header",{className:L["menu-header"],children:[n?(0,i.jsx)("h3",{className:L["menu-title"],children:n}):(0,i.jsx)("h3",{}),l?(0,i.jsx)("button",{role:"modal-close",onClick:P,children:"X"}):(0,i.jsx)("div",{})]}),(0,i.jsx)("div",{className:L["menu-body"],children:e}),(0,i.jsx)("div",{className:L["menu-footer"]})]})]})}}}]);